"use strict";(()=>{function f(e){let t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function E(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function S(e,t){let n=f(e);return isNaN(t)?E(e,NaN):(t&&n.setDate(n.getDate()+t),n)}var F=Math.pow(10,8)*24*60*60*1e3,it=-F;var D=6e4,h=36e5;var M=3600;var v=M*24,ct=v*7,A=v*365.2425,U=A/12,lt=U*3;function y(e){let t=f(e);return t.setHours(0,0,0,0),t}function T(e,t){let n=f(e),r=f(t);return n.getTime()>r.getTime()}function N(e,t){let n=f(e),r=f(t);return+n<+r}function I(e,t){let n=t?.additionalDigits??2,r=k(e),s;if(r.date){let o=q(r.date,n);s=_(o.restDateString,o.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);let l=s.getTime(),d=0,u;if(r.time&&(d=R(r.time),isNaN(d)))return new Date(NaN);if(r.timezone){if(u=B(r.timezone),isNaN(u))return new Date(NaN)}else{let o=new Date(l+d),a=new Date(0);return a.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),a.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),a}return new Date(l+d+u)}var g={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Y=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,H=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,O=/^([+-])(\d{2})(?::?(\d{2}))?$/;function k(e){let t={},n=e.split(g.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],g.timeZoneDelimiter.test(t.date)&&(t.date=e.split(g.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){let s=g.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function q(e,t){let n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,l=r[2]?parseInt(r[2]):null;return{year:l===null?s:l*100,restDateString:e.slice((r[1]||r[2]).length)}}function _(e,t){if(t===null)return new Date(NaN);let n=e.match(Y);if(!n)return new Date(NaN);let r=!!n[4],s=p(n[1]),l=p(n[2])-1,d=p(n[3]),u=p(n[4]),o=p(n[5])-1;if(r)return Z(t,u,o)?W(t,u,o):new Date(NaN);{let a=new Date(0);return!$(t,l,d)||!P(t,s)?new Date(NaN):(a.setUTCFullYear(t,l,Math.max(s,d)),a)}}function p(e){return e?parseInt(e):1}function R(e){let t=e.match(H);if(!t)return NaN;let n=x(t[1]),r=x(t[2]),s=x(t[3]);return j(n,r,s)?n*h+r*D+s*1e3:NaN}function x(e){return e&&parseFloat(e.replace(",","."))||0}function B(e){if(e==="Z")return 0;let t=e.match(O);if(!t)return 0;let n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return J(r,s)?n*(r*h+s*D):NaN}function W(e,t,n){let r=new Date(0);r.setUTCFullYear(e,0,4);let s=r.getUTCDay()||7,l=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+l),r}var z=[31,null,31,30,31,30,31,31,30,31,30,31];function w(e){return e%400===0||e%4===0&&e%100!==0}function $(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(z[t]||(w(e)?29:28))}function P(e,t){return t>=1&&t<=(w(e)?366:365)}function Z(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function j(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function J(e,t){return t>=0&&t<=59}var Q=90,C="ridewestside:filters";function G(e){try{let t=I(e);if(isNaN(t.getTime())){let n=Date.parse(e);return isNaN(n)?null:new Date(n)}return t}catch{return null}}function K(){let e=new URLSearchParams(window.location.search),t=e.get("start"),n=e.get("end");if(t!==null||n!==null)return{start:t||"",end:n||""};try{let r=localStorage.getItem(C);if(r)return JSON.parse(r)}catch(r){console.warn("Failed to load filter state from localStorage:",r)}return{start:"",end:""}}function V(e){try{localStorage.setItem(C,JSON.stringify(e))}catch(r){console.warn("Failed to save filter state to localStorage:",r)}let t=new URL(window.location.href);e.start?t.searchParams.set("start",e.start):t.searchParams.delete("start"),e.end?t.searchParams.set("end",e.end):t.searchParams.delete("end");let n=t.toString();n!==window.location.href&&window.history.replaceState({},"",n)}function X(){let e=document.querySelector('[data-section="events"]'),t=document.querySelector('[data-section="past-events"]'),n=document.querySelector('[data-section="future-events"]');if(!e)return;let r=e.querySelectorAll(".event-card[data-date]"),s=y(new Date),l=S(s,Q),d=[],u=[],o=[];if(r.forEach(a=>{let c=a.getAttribute("data-date");if(!c)return;let i=G(c);i&&(N(i,s)?d.push({element:a,date:i}):T(i,l)?o.push({element:a,date:i}):u.push({element:a,date:i}))}),u.sort((a,c)=>a.date.getTime()-c.date.getTime()),u.forEach(({element:a})=>{e.appendChild(a)}),t){let a=t.querySelector(".collapsible-container");if(a&&d.length>0){d.sort((i,m)=>m.date.getTime()-i.date.getTime()),d.forEach(({element:i})=>{a.appendChild(i)}),t.classList.add("has-events");let c=t.querySelector(".section-count");c&&(c.textContent=`(${d.length})`)}}if(n){let a=n.querySelector(".collapsible-container");if(a&&o.length>0){o.sort((i,m)=>i.date.getTime()-m.date.getTime()),o.forEach(({element:i})=>{a.appendChild(i)}),n.classList.add("has-events");let c=n.querySelector(".section-count");c&&(c.textContent=`(${o.length})`)}}if(u.length===0){let a=document.createElement("p");a.className="no-events-message",a.textContent="No upcoming events scheduled. Check back soon!",e.appendChild(a)}}function tt(){document.querySelectorAll(".collapsible-toggle").forEach(t=>{let n=t.getAttribute("aria-controls");if(!n)return;let r=document.getElementById(n);r&&t.addEventListener("click",()=>{let s=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!s)),r.classList.toggle("expanded");let l=t.querySelector(".toggle-icon");l&&(l.textContent=s?"+":"-")})})}function et(){let e=document.getElementById("filter-start"),t=document.getElementById("filter-end"),n=document.getElementById("filter-clear");if(!e||!t)return;let r=document.querySelectorAll(".event-card[data-start], .event-card[data-end]"),s=new Set,l=new Set;r.forEach(c=>{let i=c.getAttribute("data-start"),m=c.getAttribute("data-end");i&&s.add(i),m&&l.add(m)});let d=Array.from(s).sort(),u=Array.from(l).sort();d.forEach(c=>{let i=document.createElement("option");i.value=c,i.textContent=c,e.appendChild(i)}),u.forEach(c=>{let i=document.createElement("option");i.value=c,i.textContent=c,t.appendChild(i)});let o=K();o.start&&d.includes(o.start)&&(e.value=o.start),o.end&&u.includes(o.end)&&(t.value=o.end);function a(){r.forEach(c=>{let i=c.getAttribute("data-start")||"",m=c.getAttribute("data-end")||"",L=!o.start||i===o.start,b=!o.end||m===o.end;L&&b?c.classList.remove("filtered-out"):c.classList.add("filtered-out")}),n&&(n.style.display=o.start||o.end?"block":"none"),V(o)}(o.start||o.end)&&a(),e.addEventListener("change",()=>{o.start=e.value,a()}),t.addEventListener("change",()=>{o.end=t.value,a()}),n&&n.addEventListener("click",()=>{o.start="",o.end="",e.value="",t.value="",a()})}document.addEventListener("DOMContentLoaded",()=>{X(),tt(),et()});})();
//# sourceMappingURL=main.js.map
