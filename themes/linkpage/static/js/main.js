"use strict";(()=>{function f(e){let t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function S(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function x(e,t){let n=f(e);return isNaN(t)?S(e,NaN):(t&&n.setDate(n.getDate()+t),n)}var H=Math.pow(10,8)*24*60*60*1e3,dt=-H;var h=6e4,D=36e5;var F=3600;var T=F*24,ut=T*7,k=T*365.2425,U=k/12,ft=U*3;function y(e){let t=f(e);return t.setHours(0,0,0,0),t}function w(e,t){let n=f(e),r=f(t);return n.getTime()>r.getTime()}function N(e,t){let n=f(e),r=f(t);return+n<+r}function I(e,t){let n=t?.additionalDigits??2,r=O(e),a;if(r.date){let o=$(r.date,n);a=_(o.restDateString,o.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);let c=a.getTime(),d=0,u;if(r.time&&(d=R(r.time),isNaN(d)))return new Date(NaN);if(r.timezone){if(u=z(r.timezone),isNaN(u))return new Date(NaN)}else{let o=new Date(c+d),s=new Date(0);return s.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),s.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),s}return new Date(c+d+u)}var g={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Y=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,B=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,q=/^([+-])(\d{2})(?::?(\d{2}))?$/;function O(e){let t={},n=e.split(g.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],g.timeZoneDelimiter.test(t.date)&&(t.date=e.split(g.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){let a=g.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function $(e,t){let n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};let a=r[1]?parseInt(r[1]):null,c=r[2]?parseInt(r[2]):null;return{year:c===null?a:c*100,restDateString:e.slice((r[1]||r[2]).length)}}function _(e,t){if(t===null)return new Date(NaN);let n=e.match(Y);if(!n)return new Date(NaN);let r=!!n[4],a=m(n[1]),c=m(n[2])-1,d=m(n[3]),u=m(n[4]),o=m(n[5])-1;if(r)return J(t,u,o)?W(t,u,o):new Date(NaN);{let s=new Date(0);return!Z(t,c,d)||!j(t,a)?new Date(NaN):(s.setUTCFullYear(t,c,Math.max(a,d)),s)}}function m(e){return e?parseInt(e):1}function R(e){let t=e.match(B);if(!t)return NaN;let n=v(t[1]),r=v(t[2]),a=v(t[3]);return Q(n,r,a)?n*D+r*h+a*1e3:NaN}function v(e){return e&&parseFloat(e.replace(",","."))||0}function z(e){if(e==="Z")return 0;let t=e.match(q);if(!t)return 0;let n=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return G(r,a)?n*(r*D+a*h):NaN}function W(e,t,n){let r=new Date(0);r.setUTCFullYear(e,0,4);let a=r.getUTCDay()||7,c=(t-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+c),r}var P=[31,null,31,30,31,30,31,31,30,31,30,31];function L(e){return e%400===0||e%4===0&&e%100!==0}function Z(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(P[t]||(L(e)?29:28))}function j(e,t){return t>=1&&t<=(L(e)?366:365)}function J(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function Q(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function G(e,t){return t>=0&&t<=59}var K=90,M="ridewestside:filters";function V(e){try{let t=I(e);if(isNaN(t.getTime())){let n=Date.parse(e);return isNaN(n)?null:new Date(n)}return t}catch{return null}}function X(){let e=new URLSearchParams(window.location.search),t=e.get("start"),n=e.get("end");if(t!==null||n!==null)return{start:t||"",end:n||""};try{let r=localStorage.getItem(M);if(r)return JSON.parse(r)}catch(r){console.warn("Failed to load filter state from localStorage:",r)}return{start:"",end:""}}function tt(e){try{localStorage.setItem(M,JSON.stringify(e))}catch(r){console.warn("Failed to save filter state to localStorage:",r)}let t=new URL(window.location.href);e.start?t.searchParams.set("start",e.start):t.searchParams.delete("start"),e.end?t.searchParams.set("end",e.end):t.searchParams.delete("end");let n=t.toString();n!==window.location.href&&window.history.replaceState({},"",n)}function E(e){let t=e.getAttribute("data-start"),n=e.getAttribute("data-end"),r="";if(t&&n?r=t===n?t:`${t} \u2192 ${n}`:t?r=t:n&&(r=n),r){let a=e.querySelector(".link-button");if(a){let c=a.querySelector(".link-location");c||(c=document.createElement("span"),c.className="link-location",a.appendChild(c)),c.textContent=r}}}function et(){let e=document.querySelector('[data-section="events"]'),t=document.querySelector('[data-section="past-events"]'),n=document.querySelector('[data-section="future-events"]');if(!e)return;let r=e.querySelectorAll(".event-card[data-date]"),a=y(new Date),c=x(a,K),d=[],u=[],o=[];if(r.forEach(s=>{let l=s.getAttribute("data-date");if(!l)return;let i=V(l);i&&(N(i,a)?d.push({element:s,date:i}):w(i,c)?o.push({element:s,date:i}):u.push({element:s,date:i}))}),u.sort((s,l)=>s.date.getTime()-l.date.getTime()),u.forEach(({element:s})=>{E(s),e.appendChild(s)}),t){let s=t.querySelector(".collapsible-container");if(s&&d.length>0){d.sort((i,p)=>p.date.getTime()-i.date.getTime()),d.forEach(({element:i})=>{E(i),s.appendChild(i)}),t.classList.add("has-events");let l=t.querySelector(".section-count");l&&(l.textContent=`(${d.length})`)}}if(n){let s=n.querySelector(".collapsible-container");if(s&&o.length>0){o.sort((i,p)=>i.date.getTime()-p.date.getTime()),o.forEach(({element:i})=>{E(i),s.appendChild(i)}),n.classList.add("has-events");let l=n.querySelector(".section-count");l&&(l.textContent=`(${o.length})`)}}if(u.length===0){let s=document.createElement("p");s.className="no-events-message",s.textContent="No upcoming events scheduled. Check back soon!",e.appendChild(s)}}function nt(){document.querySelectorAll(".collapsible-toggle").forEach(t=>{let n=t.getAttribute("aria-controls");if(!n)return;let r=document.getElementById(n);r&&t.addEventListener("click",()=>{let a=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!a)),r.classList.toggle("expanded");let c=t.querySelector(".toggle-icon");c&&(c.textContent=a?"+":"-")})})}function rt(){let e=document.getElementById("filter-start"),t=document.getElementById("filter-end"),n=document.getElementById("filter-clear");if(!e||!t)return;let r=document.querySelectorAll(".event-card[data-start], .event-card[data-end]"),a=new Set,c=new Set;r.forEach(l=>{let i=l.getAttribute("data-start"),p=l.getAttribute("data-end");i&&a.add(i),p&&c.add(p)});let d=Array.from(a).sort(),u=Array.from(c).sort();d.forEach(l=>{let i=document.createElement("option");i.value=l,i.textContent=l,e.appendChild(i)}),u.forEach(l=>{let i=document.createElement("option");i.value=l,i.textContent=l,t.appendChild(i)});let o=X();o.start&&d.includes(o.start)&&(e.value=o.start),o.end&&u.includes(o.end)&&(t.value=o.end);function s(){r.forEach(l=>{let i=l.getAttribute("data-start")||"",p=l.getAttribute("data-end")||"",b=!o.start||i===o.start,A=!o.end||p===o.end;b&&A?l.classList.remove("filtered-out"):l.classList.add("filtered-out")}),n&&(n.style.display=o.start||o.end?"block":"none"),tt(o)}(o.start||o.end)&&s(),e.addEventListener("change",()=>{o.start=e.value,s()}),t.addEventListener("change",()=>{o.end=t.value,s()}),n&&n.addEventListener("click",()=>{o.start="",o.end="",e.value="",t.value="",s()})}function ot(){document.querySelectorAll(".share-button").forEach(t=>{t.addEventListener("click",async()=>{let n=t.getAttribute("data-event-title")||"Event",r=t.getAttribute("data-event-date")||"",a=t.getAttribute("data-event-url")||"",c={title:n,text:r,url:a},d=`${n}${r?`
${r}`:""}
${a}`;if(navigator.share&&(!navigator.canShare||navigator.canShare(c)))try{await navigator.share(c)}catch(u){u.name!=="AbortError"&&(console.warn("Share failed:",u),await C(d,t))}else await C(d,t)})})}async function C(e,t){try{await navigator.clipboard.writeText(e),t.classList.add("copied");let n=t.innerHTML;t.innerHTML=`
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
      </svg>
    `,setTimeout(()=>{t.classList.remove("copied"),t.innerHTML=n},2e3)}catch(n){console.error("Failed to copy to clipboard:",n)}}document.addEventListener("DOMContentLoaded",()=>{et(),nt(),rt(),ot()});})();
//# sourceMappingURL=main.js.map
