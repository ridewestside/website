"use strict";(()=>{function f(e){let t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function E(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function y(e,t){let n=f(e);return isNaN(t)?E(e,NaN):(t&&n.setDate(n.getDate()+t),n)}var F=Math.pow(10,8)*24*60*60*1e3,ct=-F;var D=6e4,h=36e5;var A=3600;var T=A*24,lt=T*7,k=T*365.2425,H=k/12,dt=H*3;function v(e){let t=f(e);return t.setHours(0,0,0,0),t}function N(e,t){let n=f(e),o=f(t);return n.getTime()>o.getTime()}function I(e,t){let n=f(e),o=f(t);return+n<+o}function w(e,t){let n=t?.additionalDigits??2,o=q(e),s;if(o.date){let r=_(o.date,n);s=B(r.restDateString,r.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);let c=s.getTime(),d=0,u;if(o.time&&(d=R(o.time),isNaN(d)))return new Date(NaN);if(o.timezone){if(u=$(o.timezone),isNaN(u))return new Date(NaN)}else{let r=new Date(c+d),a=new Date(0);return a.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),a.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),a}return new Date(c+d+u)}var g={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},U=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Y=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,O=/^([+-])(\d{2})(?::?(\d{2}))?$/;function q(e){let t={},n=e.split(g.dateTimeDelimiter),o;if(n.length>2)return t;if(/:/.test(n[0])?o=n[0]:(t.date=n[0],o=n[1],g.timeZoneDelimiter.test(t.date)&&(t.date=e.split(g.timeZoneDelimiter)[0],o=e.substr(t.date.length,e.length))),o){let s=g.timezone.exec(o);s?(t.time=o.replace(s[1],""),t.timezone=s[1]):t.time=o}return t}function _(e,t){let n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),o=e.match(n);if(!o)return{year:NaN,restDateString:""};let s=o[1]?parseInt(o[1]):null,c=o[2]?parseInt(o[2]):null;return{year:c===null?s:c*100,restDateString:e.slice((o[1]||o[2]).length)}}function B(e,t){if(t===null)return new Date(NaN);let n=e.match(U);if(!n)return new Date(NaN);let o=!!n[4],s=m(n[1]),c=m(n[2])-1,d=m(n[3]),u=m(n[4]),r=m(n[5])-1;if(o)return j(t,u,r)?W(t,u,r):new Date(NaN);{let a=new Date(0);return!P(t,c,d)||!Z(t,s)?new Date(NaN):(a.setUTCFullYear(t,c,Math.max(s,d)),a)}}function m(e){return e?parseInt(e):1}function R(e){let t=e.match(Y);if(!t)return NaN;let n=x(t[1]),o=x(t[2]),s=x(t[3]);return J(n,o,s)?n*h+o*D+s*1e3:NaN}function x(e){return e&&parseFloat(e.replace(",","."))||0}function $(e){if(e==="Z")return 0;let t=e.match(O);if(!t)return 0;let n=t[1]==="+"?-1:1,o=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return Q(o,s)?n*(o*h+s*D):NaN}function W(e,t,n){let o=new Date(0);o.setUTCFullYear(e,0,4);let s=o.getUTCDay()||7,c=(t-1)*7+n+1-s;return o.setUTCDate(o.getUTCDate()+c),o}var z=[31,null,31,30,31,30,31,31,30,31,30,31];function C(e){return e%400===0||e%4===0&&e%100!==0}function P(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(z[t]||(C(e)?29:28))}function Z(e,t){return t>=1&&t<=(C(e)?366:365)}function j(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function J(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function Q(e,t){return t>=0&&t<=59}var G=90,L="ridewestside:filters";function K(e){try{let t=w(e);if(isNaN(t.getTime())){let n=Date.parse(e);return isNaN(n)?null:new Date(n)}return t}catch{return null}}function V(){let e=new URLSearchParams(window.location.search),t=e.get("start"),n=e.get("end");if(t!==null||n!==null)return{start:t||"",end:n||""};try{let o=localStorage.getItem(L);if(o)return JSON.parse(o)}catch(o){console.warn("Failed to load filter state from localStorage:",o)}return{start:"",end:""}}function X(e){try{localStorage.setItem(L,JSON.stringify(e))}catch(o){console.warn("Failed to save filter state to localStorage:",o)}let t=new URL(window.location.href);e.start?t.searchParams.set("start",e.start):t.searchParams.delete("start"),e.end?t.searchParams.set("end",e.end):t.searchParams.delete("end");let n=t.toString();n!==window.location.href&&window.history.replaceState({},"",n)}function S(e){let t=e.getAttribute("data-start"),n=e.getAttribute("data-end"),o="";if(t&&n?o=`${t} \u2192 ${n}`:t?o=t:n&&(o=n),o){let s=e.querySelector(".link-button");if(s){let c=s.querySelector(".link-location");c||(c=document.createElement("span"),c.className="link-location",s.appendChild(c)),c.textContent=o}}}function tt(){let e=document.querySelector('[data-section="events"]'),t=document.querySelector('[data-section="past-events"]'),n=document.querySelector('[data-section="future-events"]');if(!e)return;let o=e.querySelectorAll(".event-card[data-date]"),s=v(new Date),c=y(s,G),d=[],u=[],r=[];if(o.forEach(a=>{let l=a.getAttribute("data-date");if(!l)return;let i=K(l);i&&(I(i,s)?d.push({element:a,date:i}):N(i,c)?r.push({element:a,date:i}):u.push({element:a,date:i}))}),u.sort((a,l)=>a.date.getTime()-l.date.getTime()),u.forEach(({element:a})=>{S(a),e.appendChild(a)}),t){let a=t.querySelector(".collapsible-container");if(a&&d.length>0){d.sort((i,p)=>p.date.getTime()-i.date.getTime()),d.forEach(({element:i})=>{S(i),a.appendChild(i)}),t.classList.add("has-events");let l=t.querySelector(".section-count");l&&(l.textContent=`(${d.length})`)}}if(n){let a=n.querySelector(".collapsible-container");if(a&&r.length>0){r.sort((i,p)=>i.date.getTime()-p.date.getTime()),r.forEach(({element:i})=>{S(i),a.appendChild(i)}),n.classList.add("has-events");let l=n.querySelector(".section-count");l&&(l.textContent=`(${r.length})`)}}if(u.length===0){let a=document.createElement("p");a.className="no-events-message",a.textContent="No upcoming events scheduled. Check back soon!",e.appendChild(a)}}function et(){document.querySelectorAll(".collapsible-toggle").forEach(t=>{let n=t.getAttribute("aria-controls");if(!n)return;let o=document.getElementById(n);o&&t.addEventListener("click",()=>{let s=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!s)),o.classList.toggle("expanded");let c=t.querySelector(".toggle-icon");c&&(c.textContent=s?"+":"-")})})}function nt(){let e=document.getElementById("filter-start"),t=document.getElementById("filter-end"),n=document.getElementById("filter-clear");if(!e||!t)return;let o=document.querySelectorAll(".event-card[data-start], .event-card[data-end]"),s=new Set,c=new Set;o.forEach(l=>{let i=l.getAttribute("data-start"),p=l.getAttribute("data-end");i&&s.add(i),p&&c.add(p)});let d=Array.from(s).sort(),u=Array.from(c).sort();d.forEach(l=>{let i=document.createElement("option");i.value=l,i.textContent=l,e.appendChild(i)}),u.forEach(l=>{let i=document.createElement("option");i.value=l,i.textContent=l,t.appendChild(i)});let r=V();r.start&&d.includes(r.start)&&(e.value=r.start),r.end&&u.includes(r.end)&&(t.value=r.end);function a(){o.forEach(l=>{let i=l.getAttribute("data-start")||"",p=l.getAttribute("data-end")||"",b=!r.start||i===r.start,M=!r.end||p===r.end;b&&M?l.classList.remove("filtered-out"):l.classList.add("filtered-out")}),n&&(n.style.display=r.start||r.end?"block":"none"),X(r)}(r.start||r.end)&&a(),e.addEventListener("change",()=>{r.start=e.value,a()}),t.addEventListener("change",()=>{r.end=t.value,a()}),n&&n.addEventListener("click",()=>{r.start="",r.end="",e.value="",t.value="",a()})}document.addEventListener("DOMContentLoaded",()=>{tt(),et(),nt()});})();
//# sourceMappingURL=main.js.map
