{
  "version": 3,
  "sources": ["../../../../src/main.ts"],
  "sourcesContent": ["/**\n * Ride Westside - Event filtering and collapsible sections\n */\n\ninterface EventElement {\n  element: HTMLElement;\n  date: Date;\n}\n\ninterface FilterState {\n  start: string;\n  end: string;\n}\n\nconst DAYS_THRESHOLD = 90;\n\nfunction parseEventDate(dateStr: string): Date | null {\n  // Parse dates like \"January 12, 2026\"\n  const parsed = Date.parse(dateStr);\n  if (isNaN(parsed)) {\n    return null;\n  }\n  return new Date(parsed);\n}\n\nfunction initEventFiltering(): void {\n  const eventsSection = document.querySelector('[data-section=\"events\"]');\n  const pastSection = document.querySelector('[data-section=\"past-events\"]');\n  const futureSection = document.querySelector('[data-section=\"future-events\"]');\n\n  if (!eventsSection) {\n    return;\n  }\n\n  const eventCards = eventsSection.querySelectorAll<HTMLElement>('.event-card[data-date]');\n  const now = new Date();\n  now.setHours(0, 0, 0, 0);\n\n  const futureThreshold = new Date(now);\n  futureThreshold.setDate(futureThreshold.getDate() + DAYS_THRESHOLD);\n\n  const pastEvents: EventElement[] = [];\n  const upcomingEvents: EventElement[] = [];\n  const futureEvents: EventElement[] = [];\n\n  eventCards.forEach((card) => {\n    const dateStr = card.getAttribute('data-date');\n    if (!dateStr) return;\n\n    const eventDate = parseEventDate(dateStr);\n    if (!eventDate) return;\n\n    if (eventDate < now) {\n      pastEvents.push({ element: card, date: eventDate });\n    } else if (eventDate > futureThreshold) {\n      futureEvents.push({ element: card, date: eventDate });\n    } else {\n      upcomingEvents.push({ element: card, date: eventDate });\n    }\n  });\n\n  // Move past events to past section\n  if (pastSection) {\n    const pastContainer = pastSection.querySelector('.collapsible-container');\n    if (pastContainer && pastEvents.length > 0) {\n      // Sort past events by date descending (most recent first)\n      pastEvents.sort((a, b) => b.date.getTime() - a.date.getTime());\n\n      pastEvents.forEach(({ element }) => {\n        pastContainer.appendChild(element);\n      });\n\n      pastSection.classList.add('has-events');\n\n      const countEl = pastSection.querySelector('.section-count');\n      if (countEl) {\n        countEl.textContent = `(${pastEvents.length})`;\n      }\n    }\n  }\n\n  // Move future events to future section\n  if (futureSection) {\n    const futureContainer = futureSection.querySelector('.collapsible-container');\n    if (futureContainer && futureEvents.length > 0) {\n      // Sort future events by date ascending (soonest first)\n      futureEvents.sort((a, b) => a.date.getTime() - b.date.getTime());\n\n      futureEvents.forEach(({ element }) => {\n        futureContainer.appendChild(element);\n      });\n\n      futureSection.classList.add('has-events');\n\n      const countEl = futureSection.querySelector('.section-count');\n      if (countEl) {\n        countEl.textContent = `(${futureEvents.length})`;\n      }\n    }\n  }\n\n  // If no upcoming events, show a message\n  if (upcomingEvents.length === 0) {\n    const noEventsMsg = document.createElement('p');\n    noEventsMsg.className = 'no-events-message';\n    noEventsMsg.textContent = 'No upcoming events scheduled. Check back soon!';\n    eventsSection.appendChild(noEventsMsg);\n  }\n}\n\nfunction initCollapsibleToggles(): void {\n  const toggles = document.querySelectorAll<HTMLButtonElement>('.collapsible-toggle');\n\n  toggles.forEach((toggle) => {\n    const containerId = toggle.getAttribute('aria-controls');\n    if (!containerId) return;\n\n    const container = document.getElementById(containerId);\n    if (!container) return;\n\n    toggle.addEventListener('click', () => {\n      const isExpanded = toggle.getAttribute('aria-expanded') === 'true';\n      toggle.setAttribute('aria-expanded', String(!isExpanded));\n      container.classList.toggle('expanded');\n\n      const icon = toggle.querySelector('.toggle-icon');\n      if (icon) {\n        icon.textContent = isExpanded ? '+' : '-';\n      }\n    });\n  });\n}\n\nfunction initLocationFilters(): void {\n  const startSelect = document.getElementById('filter-start') as HTMLSelectElement | null;\n  const endSelect = document.getElementById('filter-end') as HTMLSelectElement | null;\n  const clearButton = document.getElementById('filter-clear') as HTMLButtonElement | null;\n\n  if (!startSelect || !endSelect) {\n    return;\n  }\n\n  const allEventCards = document.querySelectorAll<HTMLElement>('.event-card[data-start], .event-card[data-end]');\n\n  // Collect unique start and end locations\n  const startLocations = new Set<string>();\n  const endLocations = new Set<string>();\n\n  allEventCards.forEach((card) => {\n    const start = card.getAttribute('data-start');\n    const end = card.getAttribute('data-end');\n    if (start) startLocations.add(start);\n    if (end) endLocations.add(end);\n  });\n\n  // Populate dropdowns\n  const sortedStarts = Array.from(startLocations).sort();\n  const sortedEnds = Array.from(endLocations).sort();\n\n  sortedStarts.forEach((loc) => {\n    const option = document.createElement('option');\n    option.value = loc;\n    option.textContent = loc;\n    startSelect.appendChild(option);\n  });\n\n  sortedEnds.forEach((loc) => {\n    const option = document.createElement('option');\n    option.value = loc;\n    option.textContent = loc;\n    endSelect.appendChild(option);\n  });\n\n  const filterState: FilterState = { start: '', end: '' };\n\n  function applyFilters(): void {\n    allEventCards.forEach((card) => {\n      const cardStart = card.getAttribute('data-start') || '';\n      const cardEnd = card.getAttribute('data-end') || '';\n\n      const matchesStart = !filterState.start || cardStart === filterState.start;\n      const matchesEnd = !filterState.end || cardEnd === filterState.end;\n\n      if (matchesStart && matchesEnd) {\n        card.classList.remove('filtered-out');\n      } else {\n        card.classList.add('filtered-out');\n      }\n    });\n\n    // Show/hide clear button\n    if (clearButton) {\n      clearButton.style.display = (filterState.start || filterState.end) ? 'block' : 'none';\n    }\n  }\n\n  startSelect.addEventListener('change', () => {\n    filterState.start = startSelect.value;\n    applyFilters();\n  });\n\n  endSelect.addEventListener('change', () => {\n    filterState.end = endSelect.value;\n    applyFilters();\n  });\n\n  if (clearButton) {\n    clearButton.addEventListener('click', () => {\n      filterState.start = '';\n      filterState.end = '';\n      startSelect.value = '';\n      endSelect.value = '';\n      applyFilters();\n    });\n  }\n}\n\n// Initialize when DOM is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n  initEventFiltering();\n  initCollapsibleToggles();\n  initLocationFilters();\n});\n"],
  "mappings": ";;;AAcA,MAAM,iBAAiB;AAEvB,WAAS,eAAe,SAA8B;AAEpD,UAAM,SAAS,KAAK,MAAM,OAAO;AACjC,QAAI,MAAM,MAAM,GAAG;AACjB,aAAO;AAAA,IACT;AACA,WAAO,IAAI,KAAK,MAAM;AAAA,EACxB;AAEA,WAAS,qBAA2B;AAClC,UAAM,gBAAgB,SAAS,cAAc,yBAAyB;AACtE,UAAM,cAAc,SAAS,cAAc,8BAA8B;AACzE,UAAM,gBAAgB,SAAS,cAAc,gCAAgC;AAE7E,QAAI,CAAC,eAAe;AAClB;AAAA,IACF;AAEA,UAAM,aAAa,cAAc,iBAA8B,wBAAwB;AACvF,UAAM,MAAM,oBAAI,KAAK;AACrB,QAAI,SAAS,GAAG,GAAG,GAAG,CAAC;AAEvB,UAAM,kBAAkB,IAAI,KAAK,GAAG;AACpC,oBAAgB,QAAQ,gBAAgB,QAAQ,IAAI,cAAc;AAElE,UAAM,aAA6B,CAAC;AACpC,UAAM,iBAAiC,CAAC;AACxC,UAAM,eAA+B,CAAC;AAEtC,eAAW,QAAQ,CAAC,SAAS;AAC3B,YAAM,UAAU,KAAK,aAAa,WAAW;AAC7C,UAAI,CAAC,QAAS;AAEd,YAAM,YAAY,eAAe,OAAO;AACxC,UAAI,CAAC,UAAW;AAEhB,UAAI,YAAY,KAAK;AACnB,mBAAW,KAAK,EAAE,SAAS,MAAM,MAAM,UAAU,CAAC;AAAA,MACpD,WAAW,YAAY,iBAAiB;AACtC,qBAAa,KAAK,EAAE,SAAS,MAAM,MAAM,UAAU,CAAC;AAAA,MACtD,OAAO;AACL,uBAAe,KAAK,EAAE,SAAS,MAAM,MAAM,UAAU,CAAC;AAAA,MACxD;AAAA,IACF,CAAC;AAGD,QAAI,aAAa;AACf,YAAM,gBAAgB,YAAY,cAAc,wBAAwB;AACxE,UAAI,iBAAiB,WAAW,SAAS,GAAG;AAE1C,mBAAW,KAAK,CAAC,GAAG,MAAM,EAAE,KAAK,QAAQ,IAAI,EAAE,KAAK,QAAQ,CAAC;AAE7D,mBAAW,QAAQ,CAAC,EAAE,QAAQ,MAAM;AAClC,wBAAc,YAAY,OAAO;AAAA,QACnC,CAAC;AAED,oBAAY,UAAU,IAAI,YAAY;AAEtC,cAAM,UAAU,YAAY,cAAc,gBAAgB;AAC1D,YAAI,SAAS;AACX,kBAAQ,cAAc,IAAI,WAAW,MAAM;AAAA,QAC7C;AAAA,MACF;AAAA,IACF;AAGA,QAAI,eAAe;AACjB,YAAM,kBAAkB,cAAc,cAAc,wBAAwB;AAC5E,UAAI,mBAAmB,aAAa,SAAS,GAAG;AAE9C,qBAAa,KAAK,CAAC,GAAG,MAAM,EAAE,KAAK,QAAQ,IAAI,EAAE,KAAK,QAAQ,CAAC;AAE/D,qBAAa,QAAQ,CAAC,EAAE,QAAQ,MAAM;AACpC,0BAAgB,YAAY,OAAO;AAAA,QACrC,CAAC;AAED,sBAAc,UAAU,IAAI,YAAY;AAExC,cAAM,UAAU,cAAc,cAAc,gBAAgB;AAC5D,YAAI,SAAS;AACX,kBAAQ,cAAc,IAAI,aAAa,MAAM;AAAA,QAC/C;AAAA,MACF;AAAA,IACF;AAGA,QAAI,eAAe,WAAW,GAAG;AAC/B,YAAM,cAAc,SAAS,cAAc,GAAG;AAC9C,kBAAY,YAAY;AACxB,kBAAY,cAAc;AAC1B,oBAAc,YAAY,WAAW;AAAA,IACvC;AAAA,EACF;AAEA,WAAS,yBAA+B;AACtC,UAAM,UAAU,SAAS,iBAAoC,qBAAqB;AAElF,YAAQ,QAAQ,CAAC,WAAW;AAC1B,YAAM,cAAc,OAAO,aAAa,eAAe;AACvD,UAAI,CAAC,YAAa;AAElB,YAAM,YAAY,SAAS,eAAe,WAAW;AACrD,UAAI,CAAC,UAAW;AAEhB,aAAO,iBAAiB,SAAS,MAAM;AACrC,cAAM,aAAa,OAAO,aAAa,eAAe,MAAM;AAC5D,eAAO,aAAa,iBAAiB,OAAO,CAAC,UAAU,CAAC;AACxD,kBAAU,UAAU,OAAO,UAAU;AAErC,cAAM,OAAO,OAAO,cAAc,cAAc;AAChD,YAAI,MAAM;AACR,eAAK,cAAc,aAAa,MAAM;AAAA,QACxC;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAEA,WAAS,sBAA4B;AACnC,UAAM,cAAc,SAAS,eAAe,cAAc;AAC1D,UAAM,YAAY,SAAS,eAAe,YAAY;AACtD,UAAM,cAAc,SAAS,eAAe,cAAc;AAE1D,QAAI,CAAC,eAAe,CAAC,WAAW;AAC9B;AAAA,IACF;AAEA,UAAM,gBAAgB,SAAS,iBAA8B,gDAAgD;AAG7G,UAAM,iBAAiB,oBAAI,IAAY;AACvC,UAAM,eAAe,oBAAI,IAAY;AAErC,kBAAc,QAAQ,CAAC,SAAS;AAC9B,YAAM,QAAQ,KAAK,aAAa,YAAY;AAC5C,YAAM,MAAM,KAAK,aAAa,UAAU;AACxC,UAAI,MAAO,gBAAe,IAAI,KAAK;AACnC,UAAI,IAAK,cAAa,IAAI,GAAG;AAAA,IAC/B,CAAC;AAGD,UAAM,eAAe,MAAM,KAAK,cAAc,EAAE,KAAK;AACrD,UAAM,aAAa,MAAM,KAAK,YAAY,EAAE,KAAK;AAEjD,iBAAa,QAAQ,CAAC,QAAQ;AAC5B,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,aAAO,QAAQ;AACf,aAAO,cAAc;AACrB,kBAAY,YAAY,MAAM;AAAA,IAChC,CAAC;AAED,eAAW,QAAQ,CAAC,QAAQ;AAC1B,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,aAAO,QAAQ;AACf,aAAO,cAAc;AACrB,gBAAU,YAAY,MAAM;AAAA,IAC9B,CAAC;AAED,UAAM,cAA2B,EAAE,OAAO,IAAI,KAAK,GAAG;AAEtD,aAAS,eAAqB;AAC5B,oBAAc,QAAQ,CAAC,SAAS;AAC9B,cAAM,YAAY,KAAK,aAAa,YAAY,KAAK;AACrD,cAAM,UAAU,KAAK,aAAa,UAAU,KAAK;AAEjD,cAAM,eAAe,CAAC,YAAY,SAAS,cAAc,YAAY;AACrE,cAAM,aAAa,CAAC,YAAY,OAAO,YAAY,YAAY;AAE/D,YAAI,gBAAgB,YAAY;AAC9B,eAAK,UAAU,OAAO,cAAc;AAAA,QACtC,OAAO;AACL,eAAK,UAAU,IAAI,cAAc;AAAA,QACnC;AAAA,MACF,CAAC;AAGD,UAAI,aAAa;AACf,oBAAY,MAAM,UAAW,YAAY,SAAS,YAAY,MAAO,UAAU;AAAA,MACjF;AAAA,IACF;AAEA,gBAAY,iBAAiB,UAAU,MAAM;AAC3C,kBAAY,QAAQ,YAAY;AAChC,mBAAa;AAAA,IACf,CAAC;AAED,cAAU,iBAAiB,UAAU,MAAM;AACzC,kBAAY,MAAM,UAAU;AAC5B,mBAAa;AAAA,IACf,CAAC;AAED,QAAI,aAAa;AACf,kBAAY,iBAAiB,SAAS,MAAM;AAC1C,oBAAY,QAAQ;AACpB,oBAAY,MAAM;AAClB,oBAAY,QAAQ;AACpB,kBAAU,QAAQ;AAClB,qBAAa;AAAA,MACf,CAAC;AAAA,IACH;AAAA,EACF;AAGA,WAAS,iBAAiB,oBAAoB,MAAM;AAClD,uBAAmB;AACnB,2BAAuB;AACvB,wBAAoB;AAAA,EACtB,CAAC;",
  "names": []
}
