{
  "version": 3,
  "sources": ["../../../../src/main.ts"],
  "sourcesContent": ["/**\n * Ride Westside - Event filtering and collapsible sections\n */\n\ninterface EventElement {\n  element: HTMLElement;\n  date: Date;\n}\n\ninterface FilterState {\n  start: string;\n  end: string;\n}\n\nconst DAYS_THRESHOLD = 90;\n\nfunction parseEventDate(dateStr: string): Date | null {\n  // Parse dates like \"January 12, 2026\"\n  const parsed = Date.parse(dateStr);\n  if (isNaN(parsed)) {\n    return null;\n  }\n  return new Date(parsed);\n}\n\nfunction initEventFiltering(): void {\n  const eventsSection = document.querySelector('[data-section=\"events\"]');\n  const pastSection = document.querySelector('[data-section=\"past-events\"]');\n  const futureSection = document.querySelector('[data-section=\"future-events\"]');\n\n  if (!eventsSection) {\n    return;\n  }\n\n  const eventCards = eventsSection.querySelectorAll<HTMLElement>('.event-card[data-date]');\n  const now = new Date();\n  now.setHours(0, 0, 0, 0);\n\n  const futureThreshold = new Date(now);\n  futureThreshold.setDate(futureThreshold.getDate() + DAYS_THRESHOLD);\n\n  const pastEvents: EventElement[] = [];\n  const upcomingEvents: EventElement[] = [];\n  const futureEvents: EventElement[] = [];\n\n  eventCards.forEach((card) => {\n    const dateStr = card.getAttribute('data-date');\n    if (!dateStr) return;\n\n    const eventDate = parseEventDate(dateStr);\n    if (!eventDate) return;\n\n    if (eventDate < now) {\n      pastEvents.push({ element: card, date: eventDate });\n    } else if (eventDate > futureThreshold) {\n      futureEvents.push({ element: card, date: eventDate });\n    } else {\n      upcomingEvents.push({ element: card, date: eventDate });\n    }\n  });\n\n  // Move past events to past section\n  if (pastSection) {\n    const pastContainer = pastSection.querySelector('.collapsible-container');\n    if (pastContainer && pastEvents.length > 0) {\n      // Sort past events by date descending (most recent first)\n      pastEvents.sort((a, b) => b.date.getTime() - a.date.getTime());\n\n      pastEvents.forEach(({ element }) => {\n        pastContainer.appendChild(element);\n      });\n\n      pastSection.classList.add('has-events');\n\n      const countEl = pastSection.querySelector('.section-count');\n      if (countEl) {\n        countEl.textContent = `(${pastEvents.length})`;\n      }\n    }\n  }\n\n  // Move future events to future section\n  if (futureSection) {\n    const futureContainer = futureSection.querySelector('.collapsible-container');\n    if (futureContainer && futureEvents.length > 0) {\n      // Sort future events by date ascending (soonest first)\n      futureEvents.sort((a, b) => a.date.getTime() - b.date.getTime());\n\n      futureEvents.forEach(({ element }) => {\n        futureContainer.appendChild(element);\n      });\n\n      futureSection.classList.add('has-events');\n\n      const countEl = futureSection.querySelector('.section-count');\n      if (countEl) {\n        countEl.textContent = `(${futureEvents.length})`;\n      }\n    }\n  }\n\n  // If no upcoming events, show a message\n  if (upcomingEvents.length === 0) {\n    const noEventsMsg = document.createElement('p');\n    noEventsMsg.className = 'no-events-message';\n    noEventsMsg.textContent = 'No upcoming events scheduled. Check back soon!';\n    eventsSection.appendChild(noEventsMsg);\n  }\n}\n\nfunction initCollapsibleToggles(): void {\n  const toggles = document.querySelectorAll<HTMLButtonElement>('.collapsible-toggle');\n\n  toggles.forEach((toggle) => {\n    const containerId = toggle.getAttribute('aria-controls');\n    if (!containerId) return;\n\n    const container = document.getElementById(containerId);\n    if (!container) return;\n\n    toggle.addEventListener('click', () => {\n      const isExpanded = toggle.getAttribute('aria-expanded') === 'true';\n      toggle.setAttribute('aria-expanded', String(!isExpanded));\n      container.classList.toggle('expanded');\n\n      const icon = toggle.querySelector('.toggle-icon');\n      if (icon) {\n        icon.textContent = isExpanded ? '+' : '-';\n      }\n    });\n  });\n}\n\nfunction initLocationFilters(): void {\n  const startSelect = document.getElementById('filter-start') as HTMLSelectElement | null;\n  const endSelect = document.getElementById('filter-end') as HTMLSelectElement | null;\n  const clearButton = document.getElementById('filter-clear') as HTMLButtonElement | null;\n\n  if (!startSelect || !endSelect) {\n    return;\n  }\n\n  const allEventCards = document.querySelectorAll<HTMLElement>('.event-card[data-start], .event-card[data-end]');\n\n  // Collect unique start and end locations\n  const startLocations = new Set<string>();\n  const endLocations = new Set<string>();\n\n  allEventCards.forEach((card) => {\n    const start = card.getAttribute('data-start');\n    const end = card.getAttribute('data-end');\n    if (start) startLocations.add(start);\n    if (end) endLocations.add(end);\n  });\n\n  // Populate dropdowns\n  const sortedStarts = Array.from(startLocations).sort();\n  const sortedEnds = Array.from(endLocations).sort();\n\n  sortedStarts.forEach((loc) => {\n    const option = document.createElement('option');\n    option.value = loc;\n    option.textContent = loc;\n    startSelect.appendChild(option);\n  });\n\n  sortedEnds.forEach((loc) => {\n    const option = document.createElement('option');\n    option.value = loc;\n    option.textContent = loc;\n    endSelect.appendChild(option);\n  });\n\n  const filterState: FilterState = { start: '', end: '' };\n\n  function applyFilters(): void {\n    allEventCards.forEach((card) => {\n      const cardStart = card.getAttribute('data-start') || '';\n      const cardEnd = card.getAttribute('data-end') || '';\n\n      const matchesStart = !filterState.start || cardStart === filterState.start;\n      const matchesEnd = !filterState.end || cardEnd === filterState.end;\n\n      if (matchesStart && matchesEnd) {\n        card.classList.remove('filtered-out');\n      } else {\n        card.classList.add('filtered-out');\n      }\n    });\n\n    // Show/hide clear button\n    if (clearButton) {\n      clearButton.style.display = (filterState.start || filterState.end) ? 'block' : 'none';\n    }\n  }\n\n  startSelect.addEventListener('change', () => {\n    filterState.start = startSelect.value;\n    applyFilters();\n  });\n\n  endSelect.addEventListener('change', () => {\n    filterState.end = endSelect.value;\n    applyFilters();\n  });\n\n  if (clearButton) {\n    clearButton.addEventListener('click', () => {\n      filterState.start = '';\n      filterState.end = '';\n      startSelect.value = '';\n      endSelect.value = '';\n      applyFilters();\n    });\n  }\n}\n\n// Initialize when DOM is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n  initEventFiltering();\n  initCollapsibleToggles();\n  initLocationFilters();\n});\n"],
  "mappings": "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",
  "names": ["parseEventDate", "dateStr", "parsed", "initEventFiltering", "eventsSection", "pastSection", "futureSection", "eventCards", "now", "futureThreshold", "pastEvents", "upcomingEvents", "futureEvents", "card", "eventDate", "pastContainer", "a", "b", "element", "countEl", "futureContainer", "noEventsMsg", "initCollapsibleToggles", "toggle", "containerId", "container", "isExpanded", "icon", "initLocationFilters", "startSelect", "endSelect", "clearButton", "allEventCards", "startLocations", "endLocations", "start", "end", "sortedStarts", "sortedEnds", "loc", "option", "filterState", "applyFilters", "cardStart", "cardEnd", "matchesStart", "matchesEnd"]
}
